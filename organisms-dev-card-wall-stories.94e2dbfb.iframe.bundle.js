"use strict";(self.webpackChunk_open_sauced_insights=self.webpackChunk_open_sauced_insights||[]).push([[340],{"./stories/organisms/dev-card-wall.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},Loading:function(){return Loading},default:function(){return dev_card_wall_stories}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/react/index.js"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),useMeasure=__webpack_require__("./node_modules/react-use/esm/useMeasure.js"),useKeyPress=__webpack_require__("./node_modules/react-use/esm/useKeyPress.js"),useKey=__webpack_require__("./node_modules/react-use/esm/useKey.js"),react_spring_web_modern=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring_web.modern.mjs"),use_gesture_react_esm=__webpack_require__("./node_modules/@use-gesture/react/dist/use-gesture-react.esm.js"),useOutsideClickRef=__webpack_require__("./node_modules/rooks/dist/esm/hooks/useOutsideClickRef.js"),dev_card=__webpack_require__("./components/molecules/DevCard/dev-card.tsx"),Button_button=__webpack_require__("./components/atoms/Button/button.tsx"),chevron_left_src="static/media/chevron-left.de916dea.svg",__jsx=react.createElement;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var _Default$parameters,_Default$parameters2,_Loading$parameters,_Loading$parameters2,coordinatesForIndex=function coordinatesForIndex(height){return function(index){var tilesPerColumn=Math.floor((height-20)/368)+1,y=368*(index%tilesPerColumn)-(Math.floor(index/tilesPerColumn)%2==1?0:139.20000000000002);return{x:265*Math.floor(index/tilesPerColumn),y:y}}};function DevCardWall(_ref){var _ref$isLoading=_ref.isLoading,isLoading=void 0!==_ref$isLoading&&_ref$isLoading,cards=_ref.cards,initialCardIndex=_ref.initialCardIndex,_useMeasure=(0,useMeasure.Z)(),_useMeasure2=(0,slicedToArray.Z)(_useMeasure,2),containerRef=_useMeasure2[0],height=_useMeasure2[1].height,_useState=(0,react.useState)(null),activeCardIndex=_useState[0],setActiveCardIndex=_useState[1],_useOutsideClickRef=(0,useOutsideClickRef.I)((function(){setActiveCardIndex(null)})),outsideClickRef=(0,slicedToArray.Z)(_useOutsideClickRef,1)[0],_useKeyPress=(0,useKeyPress.Z)("ArrowLeft"),leftArrowIsPressed=(0,slicedToArray.Z)(_useKeyPress,1)[0],_useKeyPress3=(0,useKeyPress.Z)("ArrowDown"),downArrowIsPressed=(0,slicedToArray.Z)(_useKeyPress3,1)[0],pulseAnimation=(0,react_spring_web_modern.q_)({from:{opacity:.1},to:isLoading?[{opacity:.2},{opacity:.1}]:{opacity:0},loop:isLoading,config:{duration:1e3}}),nextButtonActiveStyle={opacity:.8,translateY:4,config:{duration:100}},nextButtonDefaultStyle={opacity:1,translateY:0},_useSpring=(0,react_spring_web_modern.q_)((function(){return leftArrowIsPressed?nextButtonActiveStyle:nextButtonDefaultStyle}),[leftArrowIsPressed]),_useSpring2=(0,slicedToArray.Z)(_useSpring,2),nextButtonSpringStyle=_useSpring2[0],nextButtonSpringApi=_useSpring2[1],bindHover=(0,use_gesture_react_esm.useGesture)({onHover:function onHover(state){var hoverIndex=state.args[0];cardApi.start((function(i){return state.hovering&&i===hoverIndex&&i!==activeCardIndex?{translateY:-20}:{translateY:0}}))}}),_useSprings=(0,react_spring_web_modern.bY)(cards.length,(function(index){return{from:{x:0,y:0,opacity:1,translateY:0,scale:1,zIndex:0},to:_objectSpread({scale:1,opacity:1,zIndex:0,delay:100*index},coordinatesForIndex(height)(index))}}),[cards,height]),_useSprings2=(0,slicedToArray.Z)(_useSprings,2),cardSprings=_useSprings2[0],cardApi=_useSprings2[1],_useSprings3=(0,react_spring_web_modern.bY)(cards.length,(function(index){return{opacity:0,translateY:50}}),[cards,activeCardIndex]),_useSprings4=(0,slicedToArray.Z)(_useSprings3,2),cardButtonSprings=_useSprings4[0],cardButtonApi=_useSprings4[1];(0,react.useEffect)((function(){var _animate;(_animate=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:cardApi.start((function(i){return i===activeCardIndex?{scale:1.1,translateY:0,opacity:1,zIndex:49,x:0,y:height/2-174,immediate:"zIndex"}:_objectSpread(_objectSpread({scale:1,translateY:0,opacity:1,zIndex:0},coordinatesForIndex(height)(i)),{},{immediate:"zIndex"})})),cardButtonApi.start((function(i){return i===activeCardIndex?{opacity:1,translateY:0,delay:250}:{opacity:0,translateY:50}}));case 2:case"end":return _context.stop()}}),_callee)}))),function animate(){return _animate.apply(this,arguments)})()}),[activeCardIndex,cardApi,cardButtonApi,height]),(0,react.useEffect)((function(){void 0!==initialCardIndex&&setActiveCardIndex(initialCardIndex)}),[initialCardIndex]);var nextCard=(0,react.useCallback)((function(){setActiveCardIndex((function(index){return null===index?0:(index+1)%cards.length}))}),[cards]);(0,useKey.Z)("ArrowLeft",nextCard,{},[nextCard]),(0,useKey.Z)("ArrowDown",nextCard,{},[nextCard]),(0,react.useEffect)((function(){leftArrowIsPressed||downArrowIsPressed?nextButtonSpringApi.start({opacity:.8,translateY:4,config:{duration:100}}):nextButtonSpringApi.start({opacity:1,translateY:0})}),[leftArrowIsPressed,downArrowIsPressed,nextButtonSpringApi]);var loadingSkeleton=Array.from({length:20},(function(_,i){var _coordinatesForIndex=coordinatesForIndex(height)(i),x=_coordinatesForIndex.x,y=_coordinatesForIndex.y;return __jsx(react_spring_web_modern.q.div,{className:"grid absolute rounded-3xl bg-white",key:i,style:_objectSpread({width:"".concat(245,"px"),height:"".concat(348,"px"),left:"".concat(x,"px"),top:"".concat(y,"px")},pulseAnimation)})})),cardElements=cardSprings.map((function(_ref2,i){var x=_ref2.x,y=_ref2.y,translateY=_ref2.translateY,scale=_ref2.scale,zIndex=_ref2.zIndex,cardProps=cards[i],buttonSpring=cardButtonSprings[i];return __jsx(react_spring_web_modern.q.div,(0,esm_extends.Z)({},bindHover(i),{className:"grid absolute gap-3",key:i,onClick:function onClick(event){event.stopPropagation(),setActiveCardIndex(i)},style:{width:"".concat(245,"px"),height:"".concat(348,"px"),left:x.to((function(x){return"".concat(x,"px")})),top:y.to((function(y){return"".concat(y,"px")})),translateY:translateY.to((function(y){return"".concat(y,"px")})),scale:scale,zIndex:zIndex}}),__jsx(dev_card.Z,(0,esm_extends.Z)({key:"card",isInteractive:i===activeCardIndex,hideProfileButton:!0},cardProps)),__jsx(react_spring_web_modern.q.div,{key:"button",className:"grid place-content-center",style:_objectSpread({},buttonSpring)},__jsx(Button_button.Z,{variant:"primary",href:"/user/".concat(cardProps.username)},"View Profile")))}));return __jsx("div",{className:"grid relative",ref:outsideClickRef,onClick:function onClick(){setActiveCardIndex(null)}},__jsx("div",{className:"relative ml-20",ref:containerRef},loadingSkeleton,cardElements,__jsx("div",{style:{width:"calc(100% + 15px)",position:"absolute",top:0,left:-15,bottom:0,right:0,zIndex:2,pointerEvents:"none",background:"linear-gradient(90deg, #000 0%, rgba(0, 0, 0, 0.00) 100%)"}}),__jsx("div",{style:{width:"calc(100% + 15px)",position:"absolute",top:0,left:-15,zIndex:2,pointerEvents:"none",height:"72.42614145%",background:"linear-gradient(180deg, #000 0%, rgba(0, 0, 0, 0.00) 40%)"}})),__jsx(react_spring_web_modern.q.button,{onClick:function handleNextButtonClick(event){event.stopPropagation(),nextCard()},onMouseDown:function onMouseDown(event){return nextButtonSpringApi.start(nextButtonActiveStyle)},onMouseUp:function onMouseUp(event){return nextButtonSpringApi.start(nextButtonDefaultStyle)},className:"rounded-md border border-amber-700 w-10 h-10 absolute left-0 top-1/2 block z-50 active:outline-none",style:_objectSpread({backgroundColor:"#271700",backgroundImage:"url(".concat(chevron_left_src,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center center"},nextButtonSpringStyle)}))}DevCardWall.displayName="DevCardWall",DevCardWall.__docgenInfo={description:"",methods:[],displayName:"DevCardWall",props:{isLoading:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:""},cards:{required:!0,tsType:{name:"Array",elements:[{name:"DevCardProps"}],raw:"DevCardProps[]"},description:""},initialCardIndex:{required:!1,tsType:{name:"number"},description:""}}};try{devcardwall.displayName="devcardwall",devcardwall.__docgenInfo={description:"",displayName:"devcardwall",props:{cards:{defaultValue:null,description:"",name:"cards",required:!0,type:{name:"DevCardProps[]"}},isLoading:{defaultValue:{value:"false"},description:"",name:"isLoading",required:!1,type:{name:"boolean"}},initialCardIndex:{defaultValue:null,description:"",name:"initialCardIndex",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/organisms/DevCardWall/dev-card-wall.tsx#devcardwall"]={docgenInfo:devcardwall.__docgenInfo,name:"devcardwall",path:"components/organisms/DevCardWall/dev-card-wall.tsx#devcardwall"})}catch(__react_docgen_typescript_loader_error){}var dev_card_wall_stories_jsx=react.createElement;function dev_card_wall_stories_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function dev_card_wall_stories_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?dev_card_wall_stories_ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):dev_card_wall_stories_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var cards=Array.from({length:10},(function(_,i){return{username:"test".concat(i),name:"test",avatarURL:"https://avatars.githubusercontent.com/u/54212428?v=4"}})),dev_card_wall_stories={title:"Design System/Organisms/DevCard Wall",component:DevCardWall,parameters:{layout:"fullscreen",backgrounds:{default:"dark"}},decorators:[function(Story){return dev_card_wall_stories_jsx("div",{className:"grid w-screen h-screen"},dev_card_wall_stories_jsx(Story,null))}]},Default={args:{cards:[].concat(cards),isLoading:!1}},Loading={args:{cards:[],isLoading:!0}};Default.parameters=dev_card_wall_stories_objectSpread(dev_card_wall_stories_objectSpread({},Default.parameters),{},{docs:dev_card_wall_stories_objectSpread(dev_card_wall_stories_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:dev_card_wall_stories_objectSpread({originalSource:"{\n  args: {\n    cards: [...cards],\n    isLoading: false\n  }\n}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2=_Default$parameters2.docs)||void 0===_Default$parameters2?void 0:_Default$parameters2.source)})}),Loading.parameters=dev_card_wall_stories_objectSpread(dev_card_wall_stories_objectSpread({},Loading.parameters),{},{docs:dev_card_wall_stories_objectSpread(dev_card_wall_stories_objectSpread({},null===(_Loading$parameters=Loading.parameters)||void 0===_Loading$parameters?void 0:_Loading$parameters.docs),{},{source:dev_card_wall_stories_objectSpread({originalSource:"{\n  args: {\n    cards: [],\n    isLoading: true\n  }\n}"},null===(_Loading$parameters2=Loading.parameters)||void 0===_Loading$parameters2||null===(_Loading$parameters2=_Loading$parameters2.docs)||void 0===_Loading$parameters2?void 0:_Loading$parameters2.source)})})}}]);