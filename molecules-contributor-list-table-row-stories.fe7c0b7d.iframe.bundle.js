"use strict";(self.webpackChunk_open_sauced_insights=self.webpackChunk_open_sauced_insights||[]).push([[5541],{"./components/molecules/ContributorListTableRow/contributor-list-table-row.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return contributor_list_table_row}});var react=__webpack_require__("./node_modules/react/index.js"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),formatDistanceToNowStrict=__webpack_require__("./node_modules/date-fns/esm/formatDistanceToNowStrict/index.js"),ChevronUpIcon=__webpack_require__("./node_modules/@heroicons/react/24/solid/ChevronUpIcon.js"),ChevronDownIcon=__webpack_require__("./node_modules/@heroicons/react/24/solid/ChevronDownIcon.js"),sparkline=__webpack_require__("./components/atoms/Sparkline/sparkline.tsx"),get_prs_to_days=__webpack_require__("./lib/utils/get-prs-to-days.ts"),repositories_table=__webpack_require__("./components/organisms/RepositoriesTable/repositories-table.tsx"),useContributorPullRequests=__webpack_require__("./lib/hooks/api/useContributorPullRequests.ts"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");var hooks_useRepoList=function useRepoList(repos){return function getRepoList(repos){return repos.split(",").filter((function(rpo){return!!rpo})).map((function(repo){var _repo$split=repo.split("/"),_repo$split2=(0,slicedToArray.Z)(_repo$split,2),repoOwner=_repo$split2[0];return{repoName:_repo$split2[1],repoIcon:"https://www.github.com/".concat(null!=repoOwner?repoOwner:"github",".png?size=460")}}))}(repos)},useFetchUser=__webpack_require__("./lib/hooks/useFetchUser.ts"),Checkbox_checkbox=__webpack_require__("./components/atoms/Checkbox/checkbox.tsx"),repo_row=__webpack_require__("./components/molecules/RepoRow/repo-row.tsx"),dev_profile=__webpack_require__("./components/molecules/DevProfile/dev-profile.tsx"),__jsx=react.createElement;function getLastContributionDate(contributions){var _sortedContributions$;if(0===contributions.length)return"-";var sortedContributions=contributions.sort((function(a,b){return+new Date(b.merged_at)-+new Date(a.merged_at)}));return(0,formatDistanceToNowStrict.Z)(new Date(null===(_sortedContributions$=sortedContributions[0])||void 0===_sortedContributions$?void 0:_sortedContributions$.merged_at),{addSuffix:!0})}function getLastContributedRepo(pullRequests){return 0===pullRequests.length?"-":pullRequests.sort((function(a,b){return+new Date(b.last_updated_at)-+new Date(a.last_updated_at)}))[0].full_name}var ContributorListTableRow=function ContributorListTableRow(_ref){var contributor=_ref.contributor,topic=_ref.topic,selected=_ref.selected,handleOnSelectContributor=_ref.handleOnSelectContributor,range=_ref.range,_useState=(0,react.useState)(!1),tableOpen=_useState[0],setTableOpen=_useState[1],login=contributor.author_login||contributor.username,user=(0,useFetchUser.j)(contributor.author_login).data,data=(0,useContributorPullRequests.ZP)({contributor:login,topic:topic,repoIds:[],range:range,mostRecent:!0}).data,repoList=hooks_useRepoList(Array.from(new Set(data.map((function(prData){return prData.full_name})))).join(",")),contributorLanguageList=user?Object.keys(user.languages).map((function(language){return language})):[],days=(0,get_prs_to_days.Z)(data,Number(range||"30")),totalPrs=data.length,last30days=[{id:"last30-".concat(login),color:"hsl(63, 70%, 50%)",data:days}],mergedPrs=data.filter((function(prData){return prData.merged}));return __jsx(react.Fragment,null,__jsx("div",{className:"px-2 py-2 overflow-hidden md:px-5 odd:bg-white md:hidden even:bg-light-slate-2"},__jsx("div",{className:"flex items-center gap-x-3 text-light-slate-12"},handleOnSelectContributor&&__jsx(Checkbox_checkbox.Z,{checked:!!selected,disabled:!user,title:user?"":"Connect to GitHub",onCheckedChange:function onCheckedChange(state){return null==handleOnSelectContributor?void 0:handleOnSelectContributor(state,contributor)},className:"".concat(user&&"border-orange-500 hover:bg-orange-600")}),__jsx("div",{className:"w-[68%]"},__jsx(dev_profile.Z,{username:login,hasBorder:!contributor.author_login})),__jsx("div",{className:"w-[34%] text-normal text-light-slate-11  h-full"},__jsx("div",{className:"flex flex-col gap-x-3"},__jsx("p",null,getLastContributionDate(mergedPrs))," ",__jsx("p",{className:"text-sm font-normal truncate text-light-slate-9 md:hidden lg:max-w-[8.12rem]",title:(null==user?void 0:user.company)||getLastContributedRepo(data)},(null==user?void 0:user.company)||getLastContributedRepo(data)))),__jsx("div",{className:""},__jsx("div",{onClick:function onClick(){return setTableOpen(!tableOpen)},className:"items-center justify-between w-6 h-6 p-1 border rounded-md "},tableOpen?__jsx(ChevronUpIcon,{className:""}):__jsx(ChevronDownIcon,null)))),__jsx("div",{className:"".concat(!tableOpen&&"max-h-0","   text-light-slate-11 text-sm transition")},__jsx("div",{className:"px-2 py-3"},last30days&&__jsx(sparkline.Z,{data:last30days,width:"100%",height:54})),__jsx("div",{className:"flex items-center justify-between py-3 border-b"},__jsx("div",null,"Activity"),(0,repo_row.K)(totalPrs,!1)),__jsx("div",{className:"flex items-center justify-between py-3 border-b"},__jsx("div",null,"Contributions"),__jsx("div",{className:"flex gap-x-3"},__jsx("p",null,mergedPrs.length))),__jsx("div",{className:"flex items-center justify-between py-3 border-b"},__jsx("div",null,"Repositories"),__jsx("div",{className:"flex gap-x-3"},__jsx("p",null,repoList.length))),__jsx("div",{className:"flex items-center justify-between py-3 border-b"},__jsx("div",null,"Languages"),contributorLanguageList.length>0?__jsx("p",null,contributorLanguageList[0],contributorLanguageList.length>1?",+".concat(contributorLanguageList.length-1):""):"-"),__jsx("div",{className:"flex items-center justify-between py-3 border-b"},__jsx("div",null,"Time Zone"),__jsx("div",{className:"flex gap-x-3"},user&&user.timezone?__jsx("p",null,user.timezone):"-")))),__jsx("div",{className:"".concat(repositories_table.A.row," !gap-6 text-light-slate-11")},handleOnSelectContributor&&__jsx(Checkbox_checkbox.Z,{checked:!!selected,disabled:!user,title:user?"":"Connect to GitHub",onCheckedChange:function onCheckedChange(state){return null==handleOnSelectContributor?void 0:handleOnSelectContributor(!!state,contributor)},className:"".concat(user&&"border-orange-500 hover:bg-orange-600")}),__jsx("div",{className:(0,clsx_m.Z)("flex-1 lg:min-w-[12.5rem] overflow-hidden")},__jsx(dev_profile.Z,{username:login,hasBorder:!contributor.author_login})),__jsx("div",{className:(0,clsx_m.Z)("flex-1 flex lg:max-w-[6.25rem] w-fit justify-center")},contributor.author_login?(0,repo_row.K)(totalPrs,!1):"-"),__jsx("div",{className:(0,clsx_m.Z)("flex-1 lg:max-w-[6.25rem]  flex justify-center ")},contributor.author_login?repoList.length:"-"),__jsx("div",{className:(0,clsx_m.Z)("flex-1 lg:max-w-[130px]  flex text-light-slate-11 justify-center ")},__jsx("div",{className:"flex flex-col"},__jsx("p",null,contributor.author_login?getLastContributionDate(mergedPrs):"-")," ",__jsx("p",{className:"hidden whitespace-nowrap overflow-hidden overflow-ellipsis text-sm font-normal md:inline-flex text-light-slate-9 lg:max-w-[8.12rem]",title:(null==user?void 0:user.company)||getLastContributedRepo(data)},(null==user?void 0:user.company)||getLastContributedRepo(data)))),__jsx("div",{className:(0,clsx_m.Z)("flex-1 hidden lg:max-w-[7.5rem]  justify-center lg:flex")},contributorLanguageList.length>0?__jsx("p",null,contributorLanguageList[0],contributorLanguageList.length>1?",+".concat(contributorLanguageList.length-1):""):"-"),__jsx("div",{className:(0,clsx_m.Z)("flex-1 hidden lg:max-w-[5rem] text-light-slate-11 justify-center   lg:flex ")},__jsx("div",{className:"flex gap-x-3"},contributor.author_login&&user&&user.timezone?__jsx("p",null,user.timezone):"-")),__jsx("div",{className:(0,clsx_m.Z)("flex-1 hidden justify-center  lg:flex lg:max-w-[7.5rem]")},__jsx("p",null,contributor.author_login?mergedPrs.length:"-")),__jsx("div",{className:(0,clsx_m.Z)("flex-1 lg:min-w-[9.37rem] hidden lg:flex justify-center")},contributor.author_login&&last30days?__jsx(sparkline.Z,{data:last30days,width:"100%",height:54}):"-")))};ContributorListTableRow.__docgenInfo={description:"",methods:[],displayName:"ContributorListTableRow"};var contributor_list_table_row=ContributorListTableRow;try{contributorlisttablerow.displayName="contributorlisttablerow",contributorlisttablerow.__docgenInfo={description:"",displayName:"contributorlisttablerow",props:{contributor:{defaultValue:null,description:"",name:"contributor",required:!0,type:{name:"DbPRContributor"}},topic:{defaultValue:null,description:"",name:"topic",required:!0,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},handleOnSelectContributor:{defaultValue:null,description:"",name:"handleOnSelectContributor",required:!1,type:{name:"((state: boolean, contributor: DbPRContributor) => void)"}},range:{defaultValue:null,description:"",name:"range",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/molecules/ContributorListTableRow/contributor-list-table-row.tsx#contributorlisttablerow"]={docgenInfo:contributorlisttablerow.__docgenInfo,name:"contributorlisttablerow",path:"components/molecules/ContributorListTableRow/contributor-list-table-row.tsx#contributorlisttablerow"})}catch(__react_docgen_typescript_loader_error){}},"./components/molecules/DevProfile/dev-profile.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var next_link__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/link.js"),next_link__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),components_atoms_Avatar_avatar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./components/atoms/Avatar/avatar.tsx"),lib_utils_github__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./lib/utils/github.ts"),lib_utils_truncate_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./lib/utils/truncate-string.ts"),components_atoms_Avatar_avatar_hover_card__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./components/atoms/Avatar/avatar-hover-card.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,DevProfile=function DevProfile(_ref){var username=_ref.username,hasBorder=_ref.hasBorder;return __jsx(next_link__WEBPACK_IMPORTED_MODULE_1___default(),{href:"/user/".concat(username),className:"flex items-center gap-2 text-light-slate-11"},__jsx("div",{className:"rounded-full md:hidden"},__jsx(components_atoms_Avatar_avatar__WEBPACK_IMPORTED_MODULE_2__.Z,{className:hasBorder?"ring-2 ring-orange-500":"",size:45,isCircle:!0,hasBorder:hasBorder,avatarURL:(0,lib_utils_github__WEBPACK_IMPORTED_MODULE_3__.cc)(username)})),__jsx("div",{className:"hidden rounded-full md:flex"},__jsx(components_atoms_Avatar_avatar_hover_card__WEBPACK_IMPORTED_MODULE_4__.Z,{contributor:username,repositories:[],size:"small"})),__jsx("div",null,__jsx("h1",{className:"text-light-slate-12"},username&&username.length>10?(0,lib_utils_truncate_string__WEBPACK_IMPORTED_MODULE_5__.a)(username,11):username)))};DevProfile.displayName="DevProfile",DevProfile.__docgenInfo={description:"",methods:[],displayName:"DevProfile",props:{username:{required:!0,tsType:{name:"string"},description:""},hasBorder:{required:!0,tsType:{name:"boolean"},description:""}}},__webpack_exports__.Z=DevProfile;try{devprofile.displayName="devprofile",devprofile.__docgenInfo={description:"",displayName:"devprofile",props:{username:{defaultValue:null,description:"",name:"username",required:!0,type:{name:"string"}},hasBorder:{defaultValue:null,description:"",name:"hasBorder",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/molecules/DevProfile/dev-profile.tsx#devprofile"]={docgenInfo:devprofile.__docgenInfo,name:"devprofile",path:"components/molecules/DevProfile/dev-profile.tsx#devprofile"})}catch(__react_docgen_typescript_loader_error){}},"./lib/utils/truncate-string.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function truncateString(str,num){return void 0===str||str.length<=num||void 0===str?str:str.slice(0,num)+"..."}__webpack_require__.d(__webpack_exports__,{a:function(){return truncateString}})},"./stories/molecules/contributor-list-table-row.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ContributorListTableRowStory:function(){return ContributorListTableRowStory}});var _ContributorListTable,_ContributorListTable2,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),components_molecules_ContributorListTableRow_contributor_list_table_row__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./components/molecules/ContributorListTableRow/contributor-list-table-row.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var storyConfig={title:"Design System/Molecules/ContributorListTableRow",component:components_molecules_ContributorListTableRow_contributor_list_table_row__WEBPACK_IMPORTED_MODULE_2__.Z};__webpack_exports__.default=storyConfig;var ContributorListTableRowTemplate=function ContributorListTableRowTemplate(args){return __jsx(components_molecules_ContributorListTableRow_contributor_list_table_row__WEBPACK_IMPORTED_MODULE_2__.Z,args)};ContributorListTableRowTemplate.displayName="ContributorListTableRowTemplate";var ContributorListTableRowStory=ContributorListTableRowTemplate.bind({});ContributorListTableRowStory.args={contributor:{author_login:"foxyblocks",username:"foxyblocks",updated_at:"2021-08-24T00:00:00.000Z",user_id:1}},ContributorListTableRowStory.parameters=_objectSpread(_objectSpread({},ContributorListTableRowStory.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_ContributorListTable=ContributorListTableRowStory.parameters)||void 0===_ContributorListTable?void 0:_ContributorListTable.docs),{},{source:_objectSpread({originalSource:"args => <ContributorListTableRow {...args} />"},null===(_ContributorListTable2=ContributorListTableRowStory.parameters)||void 0===_ContributorListTable2||null===(_ContributorListTable2=_ContributorListTable2.docs)||void 0===_ContributorListTable2?void 0:_ContributorListTable2.source)})})}}]);